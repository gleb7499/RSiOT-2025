# Лабораторная работа 01. Контейнеризация и Docker

## Описание

Базовые навыки работы с Docker: создание образов, запуск контейнеров, работа с volume и сетью.

## Цели

* Научиться собирать минимальные образы (multi-stage) и запускать контейнеры под непривилегированным пользователем.
* Закрепить основы docker-compose: зависимости (БД/кэш), volume, сети.
* Настроить healthcheck и graceful shutdown.

## Задания

1. Собрать минимальный образ для простого HTTP‑сервиса (Python/Flask, Node/Express, Go net/http на выбор):

    * Multi‑stage; финальный образ ≤ 150MB

    * USER ненулевой; EXPOSE/HEALTHCHECK корректны

    * Конфигурация через переменные окружения

2. Оформить docker-compose.yml: приложение + зависимость (Redis/Postgres) + volume для данных

3. Реализовать graceful shutdown (SIGTERM), проверить корректное завершение

4. Настроить кэширование зависимостей для ускорения повторной сборной

<!-- START:artifacts -->
## Артефакты (что сдаём)

* Репозиторий с Dockerfile и docker-compose.yml; README со шагами сборки/запуска

* Логи старта, обработки запросов и корректного shutdown

* В README раздел «Метаданные студента» и именование по варианту (см. ниже)

<!-- END:artifacts -->

## Метаданные студента (обязательно)

В отчёте (README в корне проекта) укажите:

* ФИО (полностью)
* Группа
* № студенческого (StudentID)
* Email (учебный)
* GitHub username
* Вариант №
* Дата выполнения
* ОС (версия), версия Docker Desktop/Engine

В артефактах:

* Dockerfile → LABEL:
  * org.bstu.student.fullname = <ФИО>
  * org.bstu.student.id = StudentID
  * org.bstu.group = <Группа>
  * org.bstu.variant = <Номер варианта>
  * org.bstu.course = RSIOT
* docker-compose.yml → labels на сервисах:
  * org.bstu.owner = GitHub username
  * org.bstu.student.slug = slug

slug = <группа>-StudentID-v<вариант> (например, feis-41-12345-v07)

<!-- START:criteria -->
## Критерии оценивания (100 баллов)

* Корректность контейнеризации и образа (multi-stage, размер, USER, HEALTHCHECK) — 30
* Работа `docker-compose` (сервисы, volume, сеть, зависимости Redis/Postgres) — 25
* Реализация graceful shutdown и логирование завершения — 20
* Соблюдение требований к именованию и метаданным (LABEL, labels, slug, ENV) — 15
* Оформление репозитория и `README` (шаги запуска, отчётность) — 10

<!-- END:criteria -->

<!-- START:bonuses -->
## Бонусы (+ до 10)

* Оптимизация размера образа (дополнительные приёмы уменьшения размера).
* Дополнительные проверки и мониторинг (расширенный `HEALTHCHECK`, метрики, structured logging).
* Автоматизация: `Makefile`/скрипты для сборки и запуска, интеграция с CI.

<!-- END:bonuses -->

## Требования к именованию

* Теги образов: суффикс :stu-StudentID-v<вариант>
* Имена контейнеров/томов/сетей: включают slug (app-slug, data-slug, net-slug)
* ENV: STU_ID, STU_GROUP, STU_VARIANT — логируются при старте
* Postgres: имя БД app_StudentID_v<вариант> (или схема StudentID_v<вариант>)
* Redis: префикс ключей stu:StudentID:v<вариант>:entity

## Варианты (45)

См. методические материалы и список вариантов в документе ниже.

## Материалы

* Методические материалы: [Лабораторная работа 01 — Методические материалы](./Лабораторная_работа_01_Методические_материалы.md)

---

Полный список вариантов: [Варианты (ЛР01)](./Варианты.md)
